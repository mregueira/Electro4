Version 4
SHEET 1 1460 1640
WIRE 608 288 576 288
WIRE 576 384 576 288
WIRE 624 384 576 384
WIRE 688 384 688 288
WIRE 688 384 672 384
WIRE -16 432 -336 432
WIRE 128 432 64 432
WIRE 208 432 128 432
WIRE 368 432 272 432
WIRE 480 432 368 432
WIRE 528 432 480 432
WIRE 608 432 528 432
WIRE 768 432 688 432
WIRE 128 528 128 432
WIRE 768 528 768 432
WIRE -336 544 -336 432
WIRE 368 560 368 432
WIRE 528 560 528 432
WIRE 80 608 0 608
WIRE -336 720 -336 624
WIRE 128 720 128 624
WIRE 128 720 -336 720
WIRE 368 720 368 624
WIRE 368 720 128 720
WIRE 528 720 528 640
WIRE 528 720 368 720
WIRE 768 720 768 608
WIRE 768 720 528 720
WIRE -224 880 -688 880
WIRE 480 880 480 432
WIRE 1136 880 480 880
WIRE -224 928 -224 880
WIRE -288 976 -384 976
WIRE 704 992 672 992
WIRE 832 992 784 992
WIRE 928 992 896 992
WIRE -688 1072 -688 880
WIRE -224 1072 -224 1024
WIRE -80 1072 -80 608
WIRE -80 1072 -224 1072
WIRE -384 1088 -384 976
WIRE 32 1088 -384 1088
WIRE -224 1136 -224 1072
WIRE 928 1152 928 992
WIRE 928 1152 864 1152
WIRE 1008 1152 928 1152
WIRE 1136 1152 1136 880
WIRE 1136 1152 1088 1152
WIRE 480 1168 368 1168
WIRE 672 1168 672 992
WIRE 672 1168 480 1168
WIRE 800 1168 672 1168
WIRE -384 1184 -384 1088
WIRE -288 1184 -384 1184
WIRE 112 1184 112 1088
WIRE 176 1184 112 1184
WIRE 272 1184 176 1184
WIRE 304 1184 272 1184
WIRE 880 1184 864 1184
WIRE 384 1200 368 1200
WIRE 880 1216 880 1184
WIRE 880 1216 800 1216
WIRE 928 1232 928 1152
WIRE 384 1248 384 1200
WIRE 480 1248 480 1168
WIRE 272 1280 272 1184
WIRE 672 1296 672 1168
WIRE 800 1312 800 1216
WIRE -688 1360 -688 1152
WIRE -432 1360 -688 1360
WIRE -224 1360 -224 1232
WIRE -224 1360 -432 1360
WIRE 928 1376 928 1312
WIRE 1328 1408 1328 1344
WIRE 1328 1408 1264 1408
WIRE 272 1424 272 1344
WIRE 384 1424 384 1328
WIRE 384 1424 272 1424
WIRE 480 1424 480 1328
WIRE 480 1424 384 1424
WIRE 1328 1456 1328 1408
FLAG 528 432 Output
FLAG 128 432 Drain
FLAG 368 720 0
FLAG -432 1360 0
FLAG 928 1376 0
FLAG 800 1392 0
FLAG 384 1424 0
FLAG 672 1376 0
FLAG 1264 1408 0
FLAG 1328 1264 V++
FLAG 336 1216 V++
FLAG 832 1136 V++
FLAG 1328 1536 V--
FLAG 832 1200 V--
FLAG 336 1152 V--
FLAG 928 1152 Vfb
FLAG 672 1168 Vcontrol
FLAG 176 1184 CompOut
SYMBOL ind 80 416 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 220µ
SYMBOL cap 352 560 R0
SYMATTR InstName C1
SYMATTR Value 47µ
SYMBOL res 512 544 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL diode 208 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value MUR460
SYMBOL res 752 512 R0
SYMATTR InstName R8
SYMATTR Value 20
SYMBOL voltage -336 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 10
SYMBOL sw 704 432 R90
SYMATTR InstName S1
SYMBOL nmos 80 528 R0
SYMATTR InstName M1
SYMATTR Value IRF530
SYMBOL res 16 592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 47
SYMBOL npn -288 928 R0
SYMATTR InstName Q1
SYMBOL pnp -288 1136 R0
SYMATTR InstName Q2
SYMBOL voltage -688 1056 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage 592 288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 104 35 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 10m 20n 20n 10m 30m)
SYMBOL res 128 1072 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res 1104 1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 90k
SYMBOL res 944 1328 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 688 1008 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap 896 976 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL voltage 800 1296 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value 2.5
SYMBOL res 464 1232 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL voltage 384 1232 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -266 254 Left 2
SYMATTR InstName Vref1
SYMATTR Value PULSE(0 19 0 19u 500n 250n 20u)
SYMBOL diode 288 1344 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMBOL current 672 1376 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 1m
SYMBOL voltage 1328 1248 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 15
SYMBOL voltage 1328 1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL Opamps\\UniversalOpamp2 832 1168 M0
SYMATTR InstName U1
SYMBOL Opamps\\UniversalOpamp2 336 1184 R180
SYMATTR InstName U2
TEXT 864 760 Left 2 !.model SW SW(Ron=0.1 Roff=1Meg Vt=1 Vh=-0.4)
TEXT -720 1624 Left 2 !.tran 0 50m 2m 100n startup
